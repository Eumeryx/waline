{{ next_data('waline', {
  lang: page.lang | default('zh-CN', true)
}, config.waline, {
  comment: true,
  libUrl: config.waline.libUrl | default('https://cdn.jsdelivr.net/npm/@waline/client@v2', true),
  cssUrl: config.waline.libUrl | default('https://cdn.jsdelivr.net/npm/@waline/client@v2/dist/waline.css', true),
  path: url_for(page.path) | replace(r/\/index\.html$/, '/')
}) }}
<link rel="stylesheet" href="{{ config.waline.cssUrl }}">
<script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => Waline.init(CONFIG.waline));
});
</script>
